<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Teclado</title>
    <link rel="stylesheet" href="Teclado.css" />
</head>
<body>
    <h1>Teclado Clase</h1>
    <input id="display"/>
    <div class="controls">
        <button id="borrar">Borrar</button>
        <button id="comprobar">Comprobar</button>
        <span id="mensaje" aria-live="polite"></span>
    </div>
    <div id="teclado"></div>

    <script>
        const teclado = document.getElementById('teclado');
        const display = document.getElementById('display');
        const borrar = document.getElementById('borrar');
        const comprobar = document.getElementById('comprobar');
        const msg = document.getElementById('mensaje');

        const WORDS = ['CASAS', 'PERRO', 'GATOS', 'MANOS', 'LUNAS', 'ARBOL'];
        let SECRETA = '';

        function nuevaPartida() {
            SECRETA = WORDS[Math.floor(Math.random() * WORDS.length)];
            console.log('Palabra secreta de esta partida es: ' + SECRETA);
            display.value = '';
            actualizar();
        }

        // Inicia la primera partida
        nuevaPartida();

        for (let c = 65; c <= 90; c++) {
            const letra = String.fromCharCode(c);
            const k = document.createElement('div');
            k.className = 'tecla';
            k.textContent = letra;
            k.addEventListener('click', () => {
                if (display.value.length >= 5) {
                    k.classList.add('invalida');
                    console.log(`Intento añadir letra cuando ya hay 5 letras: ${display.value}`);
                    return;
                }
                display.value += letra;
                actualizar();
                console.log('Las letras actuales son: ' + display.value);
            });
            teclado.appendChild(k);
        }

        borrar.addEventListener('click', () => {
            const antes = display.value;
            display.value = display.value.slice(0, -1);
            actualizar();
            console.log('Las letras actuales son: ' + (display.value || '(vacío)'));
        });

        comprobar.addEventListener('click', () => {
            console.log('Comprobando palabra: ' + display.value);
            if (display.value.toUpperCase() === SECRETA) {
                msg.textContent = '¡Has ganado!';
                console.log('Palabra correcta: ' + display.value);
            } else {
                msg.textContent = 'Estás equivocado';
                console.log('Palabra incorrecta: ' + display.value);
            }
        });

        function actualizar() {
            borrar.disabled = display.value.length === 0;
            comprobar.disabled = display.value.length !== 5;
            if (display.value.length === 0) display.classList.add('sin-letras');
            else display.classList.remove('sin-letras');
            msg.textContent = '';
        }

        display.value = '';
        actualizar();
    </script>
</body>
</html>
